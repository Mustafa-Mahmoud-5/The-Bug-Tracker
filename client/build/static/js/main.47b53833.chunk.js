(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{146:function(e,t,a){},210:function(e,t,a){},232:function(e,t,a){e.exports=a.p+"static/media/undraw_real_time_collaboration_c62i.acc980ab.png"},233:function(e,t,a){e.exports=a.p+"static/media/undraw_my_files_swob.fece5d93.png"},234:function(e,t,a){e.exports=a.p+"static/media/undraw_charts_jj6t.9a13f988.png"},264:function(e,t,a){e.exports=a(564)},269:function(e,t,a){},473:function(e,t,a){},474:function(e,t,a){},479:function(e,t,a){},481:function(e,t,a){},499:function(e,t,a){},532:function(e,t,a){},561:function(e,t){},564:function(e,t,a){"use strict";a.r(t),a.d(t,"socket",(function(){return Za}));var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(269),a(15)),s=a(16),l=a(18),u=a(17),m=a(29),d=a(611),p=a(228),f=a.n(p);var v=function(){return r.a.createElement("div",{id:"particles"},r.a.createElement(f.a,{params:{color:{value:"#03a9f4"},particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:["#03a9f4"]},shape:{type:"circle",stroke:{width:0,color:"#03a9f4"}},opacity:{value:.5211089197812949,random:!1,anim:{enable:!0,speed:1,opacity_min:.1,sync:!1}},size:{value:6.017060304327615,random:!0,anim:{enable:!0,speed:12.181158184520175,size_min:.1,sync:!0}},line_linked:{enable:!0,distance:150,color:"#c8c8c8",opacity:.4,width:1},move:{enable:!0,speed:1,direction:"none",random:!1,straight:!1,out_mode:"bounce",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}}},height:"inherit",retina_detect:!0}))};a(473),a(474);var g=function(){return r.a.createElement("div",{elevation:3,id:"NavPaper"},r.a.createElement("ul",{id:"OuterNav"},r.a.createElement("li",null,r.a.createElement("a",{href:"#About"},"About")),r.a.createElement("li",null,r.a.createElement("a",{href:"#Features"},"Features")),r.a.createElement("li",null,r.a.createElement("a",{href:"#Author"},"Author"))))};var b=Object(m.g)((function(e){var t=function(t){e.history.push(t)};return r.a.createElement("header",null,r.a.createElement(g,null),r.a.createElement("div",{id:"About"},r.a.createElement(v,null),r.a.createElement("div",{className:"headerBox","data-aos":"fade-up"},r.a.createElement("h1",null,r.a.createElement("span",{className:"primaryColor",variant:"span"},"THE BUG TRACKER")," ","software is a free open source bug tracking application."),r.a.createElement("p",{className:"text-md"},"The application allows you to work in an isolated environment for tracking your personal projects as well as working in a realtime environment with your teams for tracking team projects."),r.a.createElement("p",{className:"text-md bold"},"Every thing happens while working with your team is realtime."),r.a.createElement("p",{className:"text-md italic"},"Sign up and start tracking your application bugs now."),r.a.createElement("div",{className:"authBox"},r.a.createElement(d.a,{color:"primary",variant:"contained",style:{marginRight:"10px"},size:"large",onClick:function(){return t("/signup")}},"Sign Up"),r.a.createElement(d.a,{color:"primary",variant:"contained",size:"large",onClick:function(){return t("/signin")}},"Sign In")))))})),h=a(232),E=a.n(h),y=a(233),j=a.n(y),w=a(234),k=a.n(w);var S=function(e){return r.a.createElement("div",{className:"row",style:{marginBottom:"1rem"}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",{className:"primaryColor"},e.head),r.a.createElement("p",{className:"italic text-md"},e.text)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("img",{src:e.pic,alt:"pic"})))},O=[{head:"1.Realtime Environment",text:"If someone changed something in your team projects/bugs, these changes will get changed in front of you immediately",pic:E.a},{head:"2.Personal Environment",text:"You can also start tracking your side projects in an individual environment",pic:j.a},{head:"3.Statistics Visualization",text:"Your team and projects statistics will get visualized so you can easily know if you are on track",pic:k.a}];var x=function(){return r.a.createElement("div",{className:"container",id:"Features"},O.map((function(e,t){return r.a.createElement(S,{key:t,head:e.head,text:e.text,pic:e.pic})})))},T=(a(479),a(235)),N=a.n(T),P=a(236),I=a.n(P);var C=function(){return r.a.createElement("footer",{id:"Author"},r.a.createElement("h2",null," \xa9 All Rights Reserved to Mustafa Mahmoud"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://www.linkedin.com/in/mustafa-mahmoud-a80a221b4/",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(N.a,{style:{color:"#0077B5",fontSize:"50px"}})),r.a.createElement("a",{href:"https://github.com/Mustafa-Mahmoud-5",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(I.a,{style:{color:"black",fontSize:"50px"}}))))};var B=function(){return r.a.createElement("div",{id:"outer"},r.a.createElement(b,null),r.a.createElement(x,null),r.a.createElement(C,null))},A=a(237),_=a.n(A),W=a(6),D=a.n(W),M=a(9),H=a(26),U=a(657),q=a(253),F=a(98);a(481);var R=function(e){var t=e.type;return r.a.createElement("div",{id:"authPage"},r.a.createElement(q.a,{id:"authForm",elevation:3},r.a.createElement(F.a,{variant:"h4",color:"primary",style:{marginBottom:"20px",textAlign:"center",textTransform:"capitalize"}},t),e.children))},L=a(63),z=a.n(L),K=function(e,t,a){var n,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=localStorage.getItem("token"),o="GET"===e?z.a.get:"POST"===e?z.a.post:"PATCH"===e?z.a.patch:"DELETE"===e?z.a.delete:null;return n=r?{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}:null,"GET"===e||"DELETE"===e?o(t,n):o(t,a,n)};function G(e){return K("POST","/auth/signup",e,!1)}function Y(e){return K("POST","/auth/signIn",e,!1)}function V(e){return K("POST","/auth/forgetPassword",e,!1)}function X(e){return K("POST","/auth/receivePasswordRecoveryCode",e,!1)}function J(e){return K("POST","/auth/changePassword",e,!1)}var $=a(23),Q=a(617);var Z=function(e){var t=e.name;return e.loading&&(t=r.a.createElement(Q.a,{variant:"indeterminate",disableShrink:!0,color:"primary",size:25,thickness:4})),"submit"===e.type?r.a.createElement(d.a,{variant:"contained",color:"primary",fullWidth:e.fullWidth,type:e.type,disabled:e.loading||e.disabled},t):r.a.createElement(d.a,{variant:"contained",color:"primary",fullWidth:e.fullWidth,disabled:e.loading||e.disabled,onClick:e.func},t)},ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",email:"",password:"",loading:!1},e.writeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.goToSignIn=function(){e.props.history.push("/signin")},e.submitHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c,o,i,s,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.firstName,c=n.lastName,o=n.email,i=n.password,e.setState({loading:!0}),s={firstName:r,lastName:c,email:o,password:i},t.prev=4,t.next=7,G(s);case 7:l=t.sent,e.setState({loading:!1,firstName:"",lastName:"",email:"",password:""}),e.props.enqueueSnackbar(l.data.message,{variant:"success"}),setTimeout((function(){e.goToSignIn()}),1e3),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),e.setState({loading:!1}),e.props.enqueueSnackbar(t.t0.response?t.t0.response.data.error:"Something Went Wrong",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(R,{type:"Sign Up"},r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{id:"outlined-basic",name:"firstName",label:"First Name",variant:"outlined",fullWidth:!0,value:this.state.firstName,onChange:this.writeHandler,required:!0})),r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{id:"outlined-basic",name:"lastName",label:"Last Name",variant:"outlined",fullWidth:!0,value:this.state.lastName,onChange:this.writeHandler,required:!0})),r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{id:"outlined-basic",name:"email",label:"Email",variant:"outlined",value:this.state.email,fullWidth:!0,onChange:this.writeHandler,required:!0})),r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{id:"outlined-basic",name:"password",label:"Password",variant:"outlined",fullWidth:!0,value:this.state.password,onChange:this.writeHandler,required:!0})),r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(Z,{type:"submit",name:"sign up",loading:this.state.loading,fullWidth:!1}))))}}]),a}(n.Component),te=Object($.b)(ee),ae=a(57),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",loading:!1},e.gotToProfile=function(){e.props.history.push("/bugtracker/profile")},e.submitHandler=function(){var t=Object(M.a)(D.a.mark((function t(a,n){var r,c,o,i,s,l,u;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),r=e.state,c=r.email,o=r.password,i={email:c,password:o},t.prev=4,t.next=7,Y(i);case 7:s=t.sent,e.setState({loading:!1}),e.props.enqueueSnackbar(s.data.message,{variant:"success"}),localStorage.setItem("token",s.data.token),n(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),e.setState({loading:!1}),e.props.enqueueSnackbar(null===(l=t.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.error,{variant:"error"});case 18:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e,a){return t.apply(this,arguments)}}(),e.writeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(R,{type:"Sign In"},r.a.createElement("form",{onSubmit:function(t){e.submitHandler(t,e.gotToProfile)}},r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{type:"email",id:"outlined-basic",name:"email",value:this.state.email,label:"Email",variant:"outlined",fullWidth:!0,required:!0,onChange:this.writeHandler})),r.a.createElement("div",{className:"inpWrapper"},r.a.createElement(U.a,{type:"password",id:"outlined-basic",name:"password",label:"Password",variant:"outlined",fullWidth:!0,required:!0,value:this.state.password,onChange:this.writeHandler})),r.a.createElement(Z,{loading:this.state.loading,type:"submit",name:"sign in",fullWidth:!0})),r.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},r.a.createElement(ae.b,{to:"/forgetPassword"},"Forgot Password?")))}}]),a}(n.Component),re=Object($.b)(ne);function ce(e){return K("PATCH","/users/editPersonalData",e)}function oe(){return K("GET","/users/userNotifications")}function ie(){return K("GET","/users/personalProjects")}function se(e,t){return K("GET","/users/getUserWithPrivateKey/".concat(e,"?teamId=").concat(t))}function le(){return K("PATCH","/users/regeneratePrivateKey")}function ue(e){return K("GET","/users/userTeams?forTeamSelecting=".concat(e))}function me(){return K("PATCH","/users/seenNotifications")}function de(){return K("PATCH","/users/clearNotifications")}var pe=function(e){return{type:"UPDATE_USER_DATA",payload:{updatedUser:e}}},fe=a(11),ve=a.n(fe),ge=a(22),be=a(12),he=a(35),Ee=a(119),ye=a(156),je=a(3),we=a(616),ke=a(36),Se=a(629),Oe=a(624),xe=a(625),Te=a(626),Ne=a(623),Pe=a(630),Ie=a(627),Ce=a(239),Be=a.n(Ce),Ae=a(243),_e=a.n(Ae),We=a(244),De=a.n(We),Me=a(570),He=a(631),Ue=a(632),qe=a(242),Fe=a.n(qe),Re=a(241),Le=a.n(Re),ze=a(660),Ke=a(246),Ge=a.n(Ke),Ye=a(628),Ve=a(245),Xe=a.n(Ve),Je=a(659),$e=a(572),Qe=a(568),Ze=a(569),et=Object(we.a)((function(e){return{modal:{display:"flex",justifyContent:"center",paddingTop:"5%",border:"none",color:"inherit"},modalPaper:{padding:"20px",width:"70%",height:"auto",border:"none",outline:"none",color:"inherit",overflowY:"scroll"}}}));function tt(e){var t=et();return r.a.createElement("div",null,r.a.createElement($e.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.modalOpen,onClose:e.closeModal,closeAfterTransition:!0,BackdropComponent:Qe.a,BackdropProps:{timeout:500}},r.a.createElement(Ze.a,{in:e.modalOpen},r.a.createElement(q.a,{elevation:3,className:t.modalPaper},r.a.createElement("h2",{id:"transition-modal-title",style:{textAlign:"center",color:"#03a9f4"}},e.header),e.children))))}var at=a(633),nt=function(e){return new Date(e).toLocaleString()},rt=Object(we.a)((function(e){return{root:{display:"flex",height:"100%",position:"relative",width:"100%"},appBar:{backgroundColor:"#11161a",color:"#03a9f4",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{backgroundColor:"#11161a",color:"#03a9f4",width:240},drawerHeader:Object(be.a)(Object(be.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:Object(H.a)({flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240,height:"100%"},e.breakpoints.down("sm"),{width:"calc(100% - ".concat(240,"px)")}),contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},navLink:{color:"inherit",textDecoration:"none",display:"inline-block",width:"100%"},navActive:{backgroundColor:"#030405"}}}));var ct=Object(m.g)((function(e){var t,a,n,c=rt(),o=Object(ke.a)(),i=r.a.useState(!(window.innerWidth<700)),s=Object(ye.a)(i,2),l=s[0],u=s[1],m=r.a.useState(!1),p=Object(ye.a)(m,2),f=p[0],v=p[1],g=window.innerWidth<700?"mobile":"desktop";window.addEventListener("resize",(function(){g=window.innerWidth<700?"mobile":"desktop"}));var b=function(){"mobile"===g&&h()},h=function(){u(!1)},E=function(){var t=Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,e.seeNewNotifications();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=0;return(null===(t=e.userNotifications)||void 0===t?void 0:t.length)>0&&e.userNotifications.forEach((function(e){!1===e.seen&&(y+=1)})),r.a.createElement("div",{className:c.root},r.a.createElement(Oe.a,null),r.a.createElement(xe.a,{position:"fixed",className:Object(je.a)(c.appBar,Object(H.a)({},c.appBarShift,l))},r.a.createElement(Te.a,null,r.a.createElement(Ie.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(je.a)(c.menuButton,l&&c.hide)},r.a.createElement(Be.a,null)),r.a.createElement(Je.a,{title:"New Project"},r.a.createElement(d.a,{color:"primary",size:"small",variant:"contained",onClick:function(){e.history.push("/bugtracker/newProject")}},"+")),r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(Je.a,{title:"Notifications"},r.a.createElement(Ie.a,{color:"primary",onClick:E},r.a.createElement(Ye.a,{color:"secondary",badgeContent:y},r.a.createElement(Le.a,{color:"primary"})))),r.a.createElement(Je.a,{title:"Log out"},r.a.createElement(Ie.a,{color:"primary",onClick:function(){window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem("token"),e.history.push("/"))}},r.a.createElement(Fe.a,{color:"primary"})))))),r.a.createElement(Se.a,{className:c.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:c.drawerPaper}},r.a.createElement("div",{className:c.drawerHeader},r.a.createElement(Ie.a,{onClick:h},"ltr"===o.direction?r.a.createElement(_e.a,null):r.a.createElement(De.a,null))),r.a.createElement(Pe.a,null),r.a.createElement(Ne.a,null,["Profile","Dashboard","Teams"].map((function(t,a){var n;return r.a.createElement(ae.c,{key:a,to:"/bugtracker/".concat(t.toLowerCase()),activeClassName:c.navActive,className:c.navLink,onClick:b},r.a.createElement(Me.a,{button:!0,key:t},r.a.createElement(He.a,null,"Profile"===t?r.a.createElement(ze.a,{color:"primary",alt:"image",src:null===(n=e.userImg)||void 0===n?void 0:n.url}):"Dashboard"===t?r.a.createElement(Xe.a,{color:"primary"}):"Teams"===t?r.a.createElement(Ge.a,{color:"primary"}):null),r.a.createElement(Ue.a,{primary:t})))})))),r.a.createElement("main",{className:Object(je.a)(c.content,Object(H.a)({},c.contentShift,l))},r.a.createElement("div",{className:c.drawerHeader}),r.a.createElement(tt,{modalOpen:f,closeModal:function(){v(!1)},header:"Notifications"},0===(null===(a=e.userNotifications)||void 0===a?void 0:a.length)?r.a.createElement("h2",{style:{textAlign:"center"}},"You have no notifications."):r.a.createElement(Ne.a,null,r.a.createElement(Z,{name:"Clear",loading:e.loading,func:e.clearNotifications}),r.a.createElement("br",null),r.a.createElement("br",null),null===(n=e.userNotifications)||void 0===n?void 0:n.map((function(e,t){var a;return r.a.createElement(Me.a,{key:t},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:null===(a=e.from.image)||void 0===a?void 0:a.url})),r.a.createElement(Ue.a,{primary:"".concat(e.from.firstName," ").concat(e.from.lastName," ").concat(e.content),secondary:"".concat(nt(e.date))}))})))),r.a.createElement("div",{style:{height:"100%"}},e.children)))})),ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={userNotifications:null,loading:!1},e.getUserNotifications=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe();case 3:a=t.sent,e.setState({userNotifications:a.data.notifications}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.seeNewNotifications=Object(M.a)(D.a.mark((function t(){var a,n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=e.state.userNotifications,n=!1,r=Object(Ee.a)(a),t.prev=4,r.s();case 6:if((c=r.n()).done){t.next=12;break}return!1===c.value.seen&&(n=!0),t.abrupt("break",12);case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),r.e(t.t0);case 17:return t.prev=17,r.f(),t.finish(17);case 20:if(!n){t.next=24;break}return e.quickSeeNewNotifications(),t.next=24,me();case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(0),console.error(t.t1);case 29:case"end":return t.stop()}}),t,null,[[0,26],[4,14,17,20]])}))),e.quickSeeNewNotifications=function(){var t=Object(he.a)(e.state.userNotifications);t.forEach((function(a,n){var r=Object(be.a)({},a);r.seen=!0,t[n]=r,e.setState({userNotifications:t})}))},e.clearNotifications=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,de();case 4:a=t.sent,e.setState({userNotifications:[]}),e.props.enqueueSnackbar(a.data.message||"Something went wrong",{variant:"success"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.props.enqueueSnackbar(t.t0.response.data.error||"Something went wrong",{variant:"error"});case 12:e.setState({loading:!1});case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserNotifications();case 2:Za.on("newMembersForTeam",function(){var e=Object(M.a)(D.a.mark((function e(a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.usersToAdd,console.log("Layout -> componentDidMount -> usersToAdd",n,t.props.userId),!n.map((function(e){return e._id.toString()})).includes(t.props.userId)){e.next=6;break}return e.next=6,t.getUserNotifications();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Za.on("userHasKicked",function(){var e=Object(M.a)(D.a.mark((function e(a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.kickedUser,console.log("Layout -> componentDidMount -> kickedUser",n,t.props.userId),t.props.userId!==n){e.next=5;break}return e.next=5,t.getUserNotifications();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.userId||(this.userId=this.props.userId),console.log("LAYOUT"),r.a.createElement("div",null,r.a.createElement(ct,{userImg:this.props.userImg,userNotifications:this.state.userNotifications,seeNewNotifications:this.seeNewNotifications,clearNotifications:this.clearNotifications,loading:this.state.loading},this.props.children))}}]),a}(n.Component),it=Object(ge.b)((function(e){var t,a;return{userImg:null===(t=e.currentUser)||void 0===t?void 0:t.image,userId:null===(a=e.currentUser)||void 0===a?void 0:a._id}}))(Object($.b)(ot)),st=a(634),lt=(a(499),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.wirteHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.newImageHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c,o,i,s,l,u;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),ve.a.start(),n=a.target.files[0],console.log("EditProfile -> imageObj",n),r=e.props.user,c=r.firstName,o=r.lastName,i=r.image,s=null===i||void 0===i?void 0:i.publicId,(l=new FormData).set("firstName",c),l.set("lastName",o),l.set("oldImagePublicKey",s),l.append("image",n,n.name),t.prev=11,t.next=14,ce(l);case 14:u=t.sent,e.props.updateUser(u.data.user),ve.a.done(),e.props.enqueueSnackbar("Image Uploaded Successfully",{variant:"success"}),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(11),e.props.enqueueSnackbar(t.t0.response.data.message,{variant:"error"}),ve.a.done();case 24:case"end":return t.stop()}}),t,null,[[11,20]])})));return function(e){return t.apply(this,arguments)}}(),e.newKey=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,le();case 4:a=t.sent,e.props.newKey(a.data.newPrivateKey),e.props.enqueueSnackbar(a.data.message,{variant:"success"}),e.setState({loading:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({loading:!1}),e.props.enqueueSnackbar(t.t0.response.data.error,{variant:"error"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.user,n=this.state.loading;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{id:"profilePicWrapper"},r.a.createElement("div",{className:"editProfilePic"},r.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"icon-button-file",type:"file",onChange:this.newImageHandler}),r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(Ie.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(st.a,null)))),r.a.createElement(ze.a,{src:null===a||void 0===a||null===(e=a.image)||void 0===e?void 0:e.url,alt:"Profile-Pic",id:"profilePic"})),a&&r.a.createElement("div",{className:""},r.a.createElement("h2",{className:"capitalize"},a.firstName+" "+a.lastName),r.a.createElement("p",{className:"secondar"},null===a||void 0===a?void 0:a.email),r.a.createElement("div",{style:{width:"300px"}},r.a.createElement("hr",null)),r.a.createElement(d.a,{color:"primary",variant:"contained",onClick:function(){return t.props.history.push("/bugtracker/profile/edit")}},"Edit"))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h2",null,"Private Key: ",r.a.createElement("span",{className:"secondary"}," ",null===a||void 0===a?void 0:a.privateKey," ")),r.a.createElement(Z,{loading:n,name:"New Key",func:this.newKey}))))}}]),a}(n.PureComponent)),ut=Object(ge.b)((function(e){return{user:e.currentUser}}),(function(e){return{updateUser:function(t){return e(pe(t))},newKey:function(t){return e(function(e){return{type:"NEW_KEY",payload:{updatedKey:e}}}(t))}}}))(Object($.b)(lt)),mt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e,n,r;Object(i.a)(this,a);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(r=t.call.apply(t,[this].concat(o))).state={loading:!1,firstName:null===(e=r.props.user)||void 0===e?void 0:e.firstName,lastName:null===(n=r.props.user)||void 0===n?void 0:n.lastName},r.writeHandler=function(e){r.setState(Object(H.a)({},e.target.name,e.target.value))},r.goToProfile=function(){r.props.history.push("/bugtracker/profile")},r.submitHandler=function(){var e=Object(M.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r.setState({loading:!0}),e.prev=2,a={firstName:r.state.firstName,lastName:r.state.lastName},e.next=6,ce(a);case 6:n=e.sent,r.setState({loading:!1}),r.props.editUser(n.data.user),r.props.enqueueSnackbar(n.data.message,{variant:"success"}),r.goToProfile(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),r.props.enqueueSnackbar(e.t0.response.data.error,{variant:"error"}),r.setState({loading:!1});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.state.firstName||this.state.lastName||this.goToProfile()}},{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.loading;return r.a.createElement(R,null,r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{style:{color:"white"}},r.a.createElement("div",{style:{margin:"20px 0"}},r.a.createElement(U.a,{id:"outlined-basic",label:"fistName",name:"firstName",variant:"outlined",fullWidth:!0,onChange:this.writeHandler,value:t})),r.a.createElement("div",{style:{margin:"20px 0"}},r.a.createElement(U.a,{id:"outlined-basic",label:"lastName",name:"lastName",variant:"outlined",fullWidth:!0,onChange:this.writeHandler,value:a})),r.a.createElement(Z,{name:"Edit",fullWidth:!0,loading:n,type:"submit"}))))}}]),a}(n.Component),dt=Object(ge.b)((function(e){return{user:e.currentUser}}),(function(e){return{editUser:function(t){return e(pe(t))}}}))(Object($.b)(mt)),pt=(a(210),a(635)),ft=a(636),vt=a(637),gt=a(638);var bt=Object(ge.b)((function(e){return{userId:e.currentUser&&e.currentUser._id}}))(Object(m.g)((function(e){var t=e.project,a=e.userId,n=1===t.bugs.length?"Bug":"Bugs";return r.a.createElement("div",{className:"col-sm-6 col-md-3",style:{marginBottom:"20px"}},r.a.createElement(q.a,{elevation:3,className:"Box"},r.a.createElement("h2",{className:"capitalize"},t.name),r.a.createElement("h4",null," ",r.a.createElement("span",null," ",t.bugs.length," ")," ",n),r.a.createElement("p",{className:"secondary",style:{fontStyle:"italic"}},"Created at ",nt(t.createdAt)),r.a.createElement("div",{className:"controllers"},r.a.createElement(Je.a,{title:"View Project",onClick:function(){e.history.push("/bugtracker/project/".concat(t._id))}},r.a.createElement(Ie.a,null,r.a.createElement(pt.a,{color:"primary"}))),a===t.owner&&r.a.createElement(Je.a,{title:"Delete Project"},r.a.createElement(Ie.a,{onClick:e.removeProject},r.a.createElement(ft.a,{color:"secondary"})))),r.a.createElement("div",{className:"status"},1===t.status?r.a.createElement(Je.a,{title:"Status: Closed"},r.a.createElement(vt.a,{style:{color:"#5cb85c"}})):r.a.createElement(Je.a,{title:"Status: Opened"},r.a.createElement(gt.a,{color:"secondary"})))))}))),ht=a(656);function Et(e){return K("GET","/users/projectDetails/".concat(e))}function yt(e){return K("POST","/users/newProject",e)}function jt(e,t){return K("GET","/users/projectTimeline/".concat(e,"?page=").concat(t))}function wt(e){return K("PATCH","/users/closeOrReOpenProject",e)}function kt(e,t){return K("DELETE","/users/deleteProject?projectId=".concat(e,"&teamId=").concat(t))}var St=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={projects:null},e.getPersonalProjects=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:a=t.sent,e.setState({projects:a.data.projects});case 4:case"end":return t.stop()}}),t)}))),e.removeProject=function(){var t=Object(M.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to remove this project ?")){t.next=15;break}return ve.a.start(),t.prev=2,t.next=5,kt(a,null);case 5:return n=t.sent,t.next=8,e.getPersonalProjects();case 8:e.props.enqueueSnackbar(n.data.message,{variant:"success"}),ve.a.done(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),ve.a.done();case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.a.start(),e.prev=1,e.next=4,this.getPersonalProjects();case 4:ve.a.done(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),ve.a.done();case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state.projects;return a&&(e=a.length>0?r.a.createElement("div",{className:"row"},a.map((function(e){return r.a.createElement(bt,{key:e._id,project:e,removeProject:function(){return t.removeProject(e._id)}})}))):r.a.createElement(ht.a,{severity:"info"},"You have no projects! start adding some from the navbar at the top.")),r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{fontSize:"1.6rem",fontWeight:"bold"}},"Your Personal Projects."),r.a.createElement("hr",null),r.a.createElement("div",null,e))}}]),a}(n.Component),Ot=Object($.b)(St),xt=a(654);var Tt=Object(ge.b)((function(e){return{currentUserId:e.currentUser._id}}))((function(e){var t=e.timeline,a=e.paginationItemsCount,n=r.a.createElement("h2",{className:"secondary text-center"},"Timeline is Empty.");return t.length>0&&(n=t.map((function(t,a){var n,c="".concat(t.from.firstName," ").concat(t.from.lastName);return t.from._id===e.currentUserId&&(c="you"),r.a.createElement(Me.a,{key:a},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:null===(n=t.from.image)||void 0===n?void 0:n.url})),r.a.createElement(Ue.a,{primary:"".concat(c," ").concat(t.content," (").concat(t.bug.name,")"),secondary:"".concat(nt(t.date))}))}))),r.a.createElement("div",{style:{wordBreak:"break-word"}},r.a.createElement(q.a,{elevation:3},r.a.createElement(F.a,{variant:"h6",className:"text-center"},"Timeline"),r.a.createElement("div",{id:"TimelineContainer"},r.a.createElement(Ne.a,null,n)),r.a.createElement("div",{className:"paginator",style:{backgroundColor:"#11161A",display:"flex",justifyContent:"center",padding:"0.2rem"}},t.length>0&&r.a.createElement(xt.a,{count:a,disabled:a<2,color:"primary",onChange:function(t,a){return e.getProjectTimeLine(!0,a)}}))))})),Nt=a(247);var Pt=function(e){var t=e.statistics,a=e.Statfor,n=[],c=[],o=["#03a9f4","#5cb85c","#d9534f"];for(var i in"team"===a&&(t=Object(be.a)(Object(be.a)({},t.projects),t.bugs),o=o.concat(["#7ed6fc","#6fe86f","#f77f7b"])),console.log("Statistics -> backgroundColor",o),t)n.push(i),c.push(t[i]);console.log("Statistics -> data",c);var s={labels:n,datasets:[{data:c,backgroundColor:o}]};return r.a.createElement(q.a,{elevation:3,style:{width:"100%",textAlign:"center"}},r.a.createElement(F.a,{variant:"h6",className:"text-center"},"Statistics"),r.a.createElement("div",{className:""},r.a.createElement(Nt.Doughnut,{id:"Dchart",displayTitle:!0,data:s,height:"300px",options:{maintainAspectRatio:!1,title:"Project Bugs"}})))},It=(a(532),a(641)),Ct=a(645),Bt=a(644),At=a(640),_t=a(642),Wt=a(643),Dt=a(639),Mt=a(646),Ht=Object(we.a)({table:{minWidth:650}});var Ut=Object(ge.b)((function(e){return{userId:e.currentUser._id}}))((function(e){var t=Ht(),a=e.bugs.slice().sort((function(e,t){return e.status-t.status}));return r.a.createElement(q.a,{elevation:3,style:{padding:"10px"}},r.a.createElement("div",{className:"TableControllers",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}},r.a.createElement(F.a,{variant:"h5",style:{textAlign:"center",fontWeight:"bold"}},"Project Bugs"),r.a.createElement(Ie.a,{onClick:function(){e.openModal("addBug")}},r.a.createElement(Dt.a,{color:"primary"}))),r.a.createElement(At.a,{component:q.a,style:{width:"100%"}},r.a.createElement(It.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(_t.a,null,r.a.createElement(Wt.a,null,r.a.createElement(Bt.a,{align:"center",style:{fontSize:"1.1rem",fontWeight:"bold"}},"Name"),r.a.createElement(Bt.a,{align:"center",style:{fontSize:"1.1rem",fontWeight:"bold"}},"Status"),r.a.createElement(Bt.a,{align:"center",style:{fontSize:"1.1rem",fontWeight:"bold"}},"CreatedAt"),r.a.createElement(Bt.a,{align:"center",style:{fontSize:"1.1rem",fontWeight:"bold"}},"Actions"))),r.a.createElement(Ct.a,null,a.map((function(t,a){return r.a.createElement(Wt.a,{key:a},r.a.createElement(Bt.a,{align:"center",component:"th",scope:"row",style:{fontSize:"17.5px"}},t.name),r.a.createElement(Bt.a,{align:"center",style:{color:1===t.status?"#5cb85c":"#d9534f",fontWeight:"bold"}},1===t.status?"Fixed":"Buggy"),r.a.createElement(Bt.a,{align:"center"},nt(t.createdAt)),r.a.createElement(Bt.a,{align:"center"},r.a.createElement(Ie.a,{onClick:function(){e.openBug(t._id,"bugDetails")}},r.a.createElement(pt.a,{color:"primary"})),e.userId===t.creator._id&&r.a.createElement(Ie.a,{onClick:function(){e.openBug(t._id,"editBug")}},r.a.createElement(Mt.a,{color:"primary"}))))}))))))}));var qt=function(e){var t,a,c=e.projectType,o=e.selectedBug,i=e.loading;console.log("BugDetails -> selectedBug",o);var s=1===o.status?"Fixed":"Buggy",l=1===o.status?"#5cb85c":"#d9534f";return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",{style:{color:l}},"(",s,")"),"public"===c&&r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"italic secondary"},"Reported By"," ","".concat(o.creator.firstName,"  ").concat(o.creator.lastName," at ").concat(nt(o.createdAt)))),"public"===c&&(null===o||void 0===o?void 0:o.fixer)&&r.a.createElement(Je.a,{title:r.a.createElement(ze.a,{src:null===(t=o.fixer)||void 0===t||null===(a=t.image)||void 0===a?void 0:a.url})},r.a.createElement("p",{style:{color:"lightgreen"}},"Bug is fixed by"," ",r.a.createElement("span",{style:{textTransform:"capitalize"}},o.fixer.firstName+" "+o.fixer.lastName))),r.a.createElement("div",{style:{color:"white",backgroundColor:"#11161A",marginBottom:"20px",padding:"10px"}},o.description),r.a.createElement(Z,{loading:i,name:1===o.status?"Re open":"Fix",func:e.updateBugStatus}))},Ft=a(566),Rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",description:""},e.writeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state,n=a.name,c=a.description;return r.a.createElement("form",{onSubmit:function(t){return e.props.addBug(t,{name:n,description:c})}},r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(U.a,{id:"outlined-basic",label:"Name",variant:"outlined",value:n,onChange:this.writeHandler,name:"name",fullWidth:!0,required:!0})),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(Ft.a,{"aria-label":"minimum height",rowsMin:15,placeholder:"Description",value:c,onChange:this.writeHandler,name:"description",style:{width:"100%",padding:"10px"},required:!0})),r.a.createElement(Z,{name:"Add Bug",type:"submit",loading:t,fullWidth:!0}))}}]),a}(n.Component),Lt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={newName:e.props.selectedBug.name,newDescription:e.props.selectedBug.description},e.writeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state,n=a.newName,c=a.newDescription;return r.a.createElement("form",{onSubmit:function(t){return e.props.editBugDetails(t,{newName:n,newDescription:c})}},r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(U.a,{id:"outlined-basic",label:"Name",variant:"outlined",value:n,onChange:this.writeHandler,name:"newName",fullWidth:!0,required:!0})),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(Ft.a,{"aria-label":"minimum height",rowsMin:15,placeholder:"Description",value:c,onChange:this.writeHandler,name:"newDescription",style:{width:"100%",padding:"10px"},required:!0})),r.a.createElement(Z,{name:"Edit Bug",type:"submit",loading:t,fullWidth:!0}))}}]),a}(n.Component);function zt(e){return K("POST","/users/addBug",e)}function Kt(e){return K("PATCH","/users/editBug",e)}function Gt(e){return K("PATCH","/users/fixBug",e)}function Yt(e){return K("PATCH","/users/bugReopen",e)}var Vt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).projectId=e.props.match.params.projectId,e.currentTeamId=e.props.currentTeamId,e.userId=e.props.userId,e.state={project:null,projectStatistics:null,projectTimeline:null,paginationItemsCount:0,modalOpen:!1,selectedBug:null,loading:!1,modalType:""},e.projectId=e.props.match.params.projectId,e.socketEvents=["newPublicBug","publicBugFixed","publicBugReopened","projectClosingOrReopening","teamIsDeleted"],e.getProjectTimeLine=Object(M.a)(D.a.mark((function t(){var a,n,r,c,o,i=arguments;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!(i.length>0&&void 0!==i[0])||i[0],n=i.length>1&&void 0!==i[1]?i[1]:1,a&&ve.a.start(),t.prev=3,t.next=6,jt(e.projectId,n);case 6:r=t.sent,e.setState({projectTimeline:r.data.timeline,paginationItemsCount:r.data.paginationItemsCount}),a&&ve.a.done(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),ve.a.done(),alert((null===(c=t.t0.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.error)||"Something Went Wrong, please try again later");case 15:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.getProject=Object(M.a)(D.a.mark((function t(){var a,n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProjectTimeLine(!1);case 2:return t.next=4,Et(e.projectId);case 4:a=t.sent,n=a.data,r=n.project,c=n.projectStatistics,e.setState({project:r,projectStatistics:c});case 7:case"end":return t.stop()}}),t)}))),e.getProjectDetails=Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.getProject(),e.getProjectTimeLine(!1)]);case 2:case"end":return t.stop()}}),t)}))),e.updateProjectStatus=Object(M.a)(D.a.mark((function t(){var a,n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(be.a)({},e.state.project),e.setState({loading:!0}),n={projectId:a._id,teamId:null},"public"===a.type&&(n.teamId=e.currentTeamId),t.prev=4,t.next=7,wt(n);case 7:r=t.sent,e.props.enqueueSnackbar(r.data.message||"Something went wrong",{variant:"success"}),c=r.data.status,a.status=c,e.setState({loading:!1,project:a}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),e.setState({loading:!1}),e.props.enqueueSnackbar(t.t0.response.data.error||"Something went wrong",{variant:"error"});case 18:case"end":return t.stop()}}),t,null,[[4,14]])}))),e.updateBugStatus=Object(M.a)(D.a.mark((function t(){var a,n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.project,r=a.selectedBug,e.setState({loading:!0}),c={teamId:null,bugId:r._id,projectId:n._id},"public"===n.type&&(c.teamId=e.currentTeamId),t.prev=4,1!==r.status){t.next=11;break}return t.next=8,Yt(c);case 8:e.props.enqueueSnackbar("Bug has been re opened Successfully",{variant:"success"}),t.next=14;break;case 11:return t.next=13,Gt(c);case 13:e.props.enqueueSnackbar("Bug has been fixed Successfully",{variant:"success"});case 14:return t.next=16,e.getProjectDetails(!1);case 16:e.setState({loading:!1,modalOpen:!1}),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),e.props.enqueueSnackbar(t.t0.response.data.error,{variant:"error"}),e.setState({loading:!1});case 23:case"end":return t.stop()}}),t,null,[[4,19]])}))),e.addBug=function(){var t=Object(M.a)(D.a.mark((function t(a,n){var r,c,o,i,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,c=n.description,a.preventDefault(),e.setState({loading:!0}),o=e.state.project,i={name:r,description:c,projectId:o._id,teamId:null},"public"===o.type&&(i.teamId=e.currentTeamId),t.prev=6,t.next=9,zt(i);case 9:return s=t.sent,t.next=12,e.getProjectDetails();case 12:e.props.enqueueSnackbar(s.data.message||"Something went Wrong",{variant:"success"}),e.setState({loading:!1,modalOpen:!1}),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(6),e.setState({loading:!1}),e.props.enqueueSnackbar(t.t0.response.data.error||"Something went Wrong",{variant:"error"});case 20:case"end":return t.stop()}}),t,null,[[6,16]])})));return function(e,a){return t.apply(this,arguments)}}(),e.editBugDetails=function(){var t=Object(M.a)(D.a.mark((function t(a,n){var r,c,o,i,s,l,u;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.newName,c=n.newDescription,a.preventDefault(),e.setState({loading:!0}),t.prev=3,o=e.state,i=o.selectedBug,s=o.project,l={newName:r,newDescription:c,bugId:i._id,projectId:s._id},t.next=8,Kt(l);case 8:return u=t.sent,t.next=11,e.getProjectDetails();case 11:e.props.enqueueSnackbar(u.data.message,{variant:"success"}),e.setState({loading:!1,modalOpen:!1}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),e.props.enqueueSnackbar(t.t0.response.data.error||"Something Went Wrong",{variant:"error"}),e.setState({loading:!1});case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,a){return t.apply(this,arguments)}}(),e.openBug=function(t,a){var n=e.state.project.bugs.find((function(e){return e._id===t}));e.setState({selectedBug:n}),e.openModal(a)},e.openModal=function(t){e.setState({modalType:t,modalOpen:!0})},e.closeModal=function(){e.setState({modalOpen:!1})},e.goBack=function(){e.props.history.goBack()},e.addNewBugForSocket=function(t){var a=Object(be.a)({},e.state.project),n=Object(he.a)(a.bugs);n.unshift(t),a.bugs=n,e.setState({project:a})},e.bugFixedOrReopenedForSocket=function(t,a){var n=Object(be.a)({},e.state.project),r=Object(he.a)(n.bugs),c=r.findIndex((function(e){return e._id===t})),o=Object(be.a)({},r[c]);o.status="fixed"===a?1:0,r[c]=o,n.bugs=r,e.setState({project:n})},e.updateStatisticsForSocket=function(t){var a=Object(be.a)({},e.state.projectStatistics);switch(t){case"newBug":a.total++,a.buggy++;break;case"fixBug":a.fixed++,a.buggy--;break;case"reopenBug":a.buggy++,a.fixed--;break;default:console.log("nothing special")}e.setState({projectStatistics:a})},e.updateProjectStatusForSocket=function(t){var a=Object(be.a)({},e.state.project);a.status=t,e.setState({project:a})},e.newTimeLineForSocket=function(t){var a=Object(he.a)(e.state.projectTimeline);a.unshift(t),e.setState({projectTimeline:a})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark((function e(){var t,a,n=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.a.start(),e.prev=1,e.next=4,this.getProjectDetails();case 4:ve.a.done(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ve.a.done(),alert((null===(t=e.t0.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Something Went Wrong, please try again later");case 11:Za.on("newPublicBug",(function(e){var t=e.projectId,a=e.bug,r=e.newTimeLine,c=e.userId;n.projectId===t&&c!==n.userId&&(n.addNewBugForSocket(a),n.updateStatisticsForSocket("newBug"),n.newTimeLineForSocket(r))})),Za.on("publicBugFixed",(function(e){var t=e.projectId,a=e.bugId,r=e.newTimeLine,c=e.userId;n.projectId===t&&n.userId!==c&&(n.updateStatisticsForSocket("fixBug"),n.bugFixedOrReopenedForSocket(a,"fixed"),n.newTimeLineForSocket(r))})),Za.on("publicBugReopened",(function(e){var t=e.bugId,a=e.projectId,r=e.newTimeLine,c=e.userId;n.projectId===a&&c!==n.userId&&(n.updateStatisticsForSocket("reopenBug"),n.bugFixedOrReopenedForSocket(t,"reopened"),n.newTimeLineForSocket(r))})),Za.on("projectClosingOrReopening",(function(e){var t=e.updatedStatus,a=e.projectId,r=e.userId;n.projectId===a&&n.userId!==r&&n.updateProjectStatusForSocket(t)})),Za.on("teamIsDeleted",(function(e){var t=e.teamId;n.currentTeamId===t&&"public"===n.state.project.type&&n.props.history.push("/bugtracker/teams"),n.props.enqueueSnackbar("This team has been deleted by its owner",{variant:"info"})}));case 16:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.socketEvents.forEach((function(e){return Za.removeEventListener(e)}))}},{key:"render",value:function(){var e,t,a,c=this;this.currentTeamId||"public"!==(null===(e=this.state.project)||void 0===e?void 0:e.type)||this.goBack();var o=this.state,i=o.project,s=o.projectStatistics,l=o.projectTimeline,u=o.paginationItemsCount,m=o.modalOpen,d=o.selectedBug,p=o.loading,f=o.modalType;return r.a.createElement(n.Fragment,null,i&&s&&l&&r.a.createElement(n.Fragment,null,1===i.status&&r.a.createElement(ht.a,{severity:"info"},"This project has been closed, you can`t work on it anymore, well done."),r.a.createElement(q.a,{id:"ProjectIntro",elevation:3},r.a.createElement("h2",null,i.name," | ",r.a.createElement("span",{style:{color:0===i.status?"#d9534f":"#5cb85c"}},"  (",0===i.status?"Opened":"Closed",") ")),r.a.createElement(Je.a,{title:r.a.createElement(ze.a,{src:null===(t=i.owner)||void 0===t||null===(a=t.image)||void 0===a?void 0:a.url})},r.a.createElement("h2",{id:"ownerH2"},"Owner: ","".concat(i.owner.firstName," ").concat(i.owner.lastName))),i.owner._id===this.userId&&r.a.createElement(Z,{name:0===i.status?"close":"re open",loading:p,func:this.updateProjectStatus})),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Tt,{timeline:l,paginationItemsCount:u,getProjectTimeLine:this.getProjectTimeLine})),r.a.createElement("div",{className:"col-md-8",id:"separator"},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Pt,{statistics:s})))),r.a.createElement("div",{className:"row",style:{marginTop:"20px"}},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Ut,{openModal:this.openModal,bugs:i.bugs,openBug:this.openBug}))))),m&&r.a.createElement(tt,{modalOpen:m,header:"bugDetails"===f?"".concat(d.name):"addBug"===f?"Add Bug":null,closeModal:function(){return c.closeModal()}},"bugDetails"===f?r.a.createElement(qt,{updateBugStatus:this.updateBugStatus,projectType:i.type,selectedBug:d,loading:p}):"addBug"===f?r.a.createElement(Rt,{loading:p,addBug:this.addBug}):"editBug"===f?r.a.createElement(Lt,{loading:p,selectedBug:d,editBugDetails:this.editBugDetails}):null))}}]),a}(n.Component),Xt=Object(ge.b)((function(e){var t;return{userId:null===(t=e.currentUser)||void 0===t?void 0:t._id,currentTeamId:e.currentTeamId}}))(Object($.b)(Vt)),Jt=a(647);var $t=Object(ge.b)((function(e){return{userId:e.currentUser&&e.currentUser._id}}))(Object(m.g)((function(e){var t=e.team,a=1===t.members.length?"Member":"Members",n=1===t.projects.length?"Project":"Projects";return r.a.createElement("div",{className:"col-md-4",style:{marginBottom:"20px"}},r.a.createElement(q.a,{className:"Box teamBox"},r.a.createElement("h2",null,t.name),r.a.createElement("div",{style:{marginBottom:"10px"}},t.members.length," ",a),r.a.createElement("div",null,0===t.projects.length?"No Projects.":"".concat(t.projects.length," ").concat(n)),r.a.createElement("p",{className:"secondary"},"Created by"," ",t.leader._id===e.userId?"you":"".concat(t.leader.firstName," ").concat(t.leader.lastName)),r.a.createElement("div",{className:"controllers"},r.a.createElement(Je.a,{title:"view Project"},r.a.createElement(Ie.a,{onClick:function(a){e.history.push("/bugtracker/teams/".concat(t._id))}},r.a.createElement(pt.a,{color:"primary"}))),t.leader._id===e.userId?r.a.createElement(Je.a,{title:"Delete Project"},r.a.createElement(Ie.a,{onClick:function(){return e.removeTeam(t._id)}},r.a.createElement(ft.a,{color:"secondary"}))):r.a.createElement(Je.a,{title:"Leave team"},r.a.createElement(Ie.a,{onClick:function(){return e.leaveTeam(t._id,t.name)}},r.a.createElement(Jt.a,{color:"secondary"}))))))})));a(146);function Qt(e){return K("POST","/teams/newTeam",e)}function Zt(e){return K("POST","/teams/addMembers",e)}function ea(e){return K("GET","/teams/getTeam/".concat(e))}function ta(e,t){return K("GET","/teams/teamNotifications/".concat(e,"?page=").concat(t))}function aa(e){return K("PATCH","/teams/kickMember",e)}function na(e){return K("DELETE","/teams/deleteTeam/".concat(e))}function ra(e){return K("PATCH","/teams/leaveTeam/".concat(e))}var ca=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:""},e.writeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state.name;return r.a.createElement("form",{onSubmit:function(t){e.props.newTeam(t,a)}},r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(U.a,{id:"outlined-basic",label:"Name",name:"name",variant:"outlined",value:a,fullWidth:!0,required:!0,onChange:this.writeHandler})),r.a.createElement(Z,{type:"submit",fullWidth:!0,loading:t,name:"Create"}))}}]),a}(n.Component),oa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,teams:null,modalOpen:!1},e.getTeams=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(!1);case 2:a=t.sent,e.setState({teams:a.data.teams});case 4:case"end":return t.stop()}}),t)}))),e.openModal=function(){e.setState({modalOpen:!0})},e.closeModal=function(){e.setState({modalOpen:!1})},e.addTeam=function(){var t=Object(M.a)(D.a.mark((function t(a,n){var r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),t.prev=2,r={name:n},t.next=6,Qt(r);case 6:return c=t.sent,t.next=9,e.getTeams();case 9:e.setState({loading:!1}),e.props.enqueueSnackbar(c.data.message,{variant:"success"}),e.closeModal(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),e.props.enqueueSnackbar(t.t0.response&&t.t0.response.data.error,{variant:"error"}),e.setState({loading:!1});case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e,a){return t.apply(this,arguments)}}(),e.removeTeam=function(){var t=Object(M.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you wanna delete this team ?")){t.next=16;break}return ve.a.start(),t.prev=2,t.next=5,na(a);case 5:return n=t.sent,t.next=8,e.getTeams();case 8:e.props.enqueueSnackbar(n.data.message,{variant:"success"}),ve.a.done(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0),ve.a.done();case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.leaveTeam=function(){var t=Object(M.a)(D.a.mark((function t(a,n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm('Are you sure you want to leave "'.concat(n,'" ?'))){t.next=16;break}return ve.a.start(),t.prev=2,t.next=5,ra(a);case 5:return r=t.sent,t.next=8,e.getTeams();case 8:e.props.enqueueSnackbar(r.data.message,{variant:"success"}),ve.a.done(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),e.props.enqueueSnackbar(t.t0.response&&t.t0.response.data.message,{variant:"error"}),ve.a.done();case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.a.start(),e.prev=1,e.next=4,this.getTeams();case 4:ve.a.done(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ve.a.done(),alert(e.t0.response&&e.t0.response.data.error||"Something went wrong, please try again later.");case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.teams,n=t.modalOpen,c=t.loading;return r.a.createElement("div",null,a&&r.a.createElement("div",null,r.a.createElement("div",{id:"TeamHeader"},r.a.createElement("div",{style:{fontSize:"1.6rem",fontWeight:"bold"}},"Your Teams."),r.a.createElement(Je.a,{title:"New Team"},r.a.createElement(d.a,{color:"primary",variant:"contained",onClick:this.openModal},r.a.createElement(Dt.a,null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},a.length>0?a.map((function(t,a){return r.a.createElement($t,{key:a,team:t,removeTeam:e.removeTeam,leaveTeam:e.leaveTeam})})):r.a.createElement(ht.a,{severity:"info",variant:"standard",style:{width:"100%"}},"You are not a member of any team."))),n&&r.a.createElement(tt,{closeModal:this.closeModal,modalOpen:n,header:"New Team"},r.a.createElement(ca,{loading:c,newTeam:this.addTeam})))}}]),a}(n.Component),ia=Object($.b)(oa);var sa=Object(ge.b)((function(e){return{userId:e.currentUser._id}}))((function(e){var t=e.teamNotifications,a=e.teamProjects,n=e.userId,c=e.paginationItemsCount,o=r.a.createElement("h2",{className:"secondary text-center"},"Notifications Are Empty.");return t.length>0&&(o=t.map((function(e,t){var c,o,i=e.from._id===n?"You":"".concat(e.from.firstName," ").concat(e.from.lastName);if("memberManipulation"===e.notificationType){var s,l,u=e.to._id===n?"you":"".concat(e.to.firstName," ").concat(e.to.lastName);return r.a.createElement(Me.a,{key:t},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:null===(s=e.from)||void 0===s||null===(l=s.image)||void 0===l?void 0:l.url})),r.a.createElement(Ue.a,{primary:"".concat(i," ").concat(e.content," (").concat(u,")"),secondary:"".concat(nt(e.createdAt))}))}var m=a.find((function(t){return t._id===e.project}));return r.a.createElement(Me.a,{key:t},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:null===(c=e.from)||void 0===c||null===(o=c.image)||void 0===o?void 0:o.url})),r.a.createElement(Ue.a,{primary:"".concat(i," ").concat(e.content," (").concat(null===m||void 0===m?void 0:m.name,")"),secondary:"".concat(nt(e.createdAt))}))}))),r.a.createElement(q.a,{elevation:3},r.a.createElement(F.a,{variant:"h6",className:"text-center"},"Notifications"),r.a.createElement("div",{id:"notificationsContainer"},r.a.createElement(Ne.a,null,o),r.a.createElement("div",{style:{backgroundColor:"#11161A",display:"flex",justifyContent:"center",padding:"0.2rem"}},t.length>0&&r.a.createElement(xt.a,{count:c,disabled:c<2,color:"primary",onChange:function(t,a){return e.paginateTeamNotifiactions(a)}}))))}));var la=function(e){var t=e.projects,a=r.a.createElement(ht.a,{severity:"info",style:{width:"100%"}},"This team has no projects yet");return t.length>0&&(a=t.map((function(t,a){return r.a.createElement(bt,{key:a,project:t,removeProject:function(){return e.removeProject(t._id)}})}))),r.a.createElement("div",{className:"row"},a)},ua=a(648),ma=a(122),da=a.n(ma);var pa=Object(ge.b)((function(e){return{userId:e.currentUser&&e.currentUser._id}}))((function(e){var t=e.userId,a=e.members,n=e.leader;return r.a.createElement("div",null,a.map((function(a,c){return r.a.createElement(Me.a,{key:c},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:a.image&&a.image.url})),r.a.createElement(Ue.a,{style:{textTransform:"capitalize"},primary:"".concat(a.firstName," ").concat(a.lastName," ").concat(a._id===n._id?"(TEAM LEADER)":"")}),r.a.createElement(ua.a,null,n._id===t&&n._id!==a._id&&r.a.createElement(Ie.a,{edge:"end","aria-label":"delete",onClick:function(){return e.kickMemberFromTeam(a._id)}},r.a.createElement(da.a,{color:"secondary"}))))})))})),fa=a(248),va=a.n(fa),ga=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={membersToAdd:[],loading:!1,userKey:"",foundUser:null},e.getMember=Object(M.a)(D.a.mark((function t(){var a,n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,a=e.state.userKey,t.next=5,se(a,e.props.teamId);case 5:n=t.sent,e.setState({loading:!1,foundUser:n.data.user,userKey:""}),e.props.enqueueSnackbar(n.data.message,{variant:"success"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({loading:!1}),e.props.enqueueSnackbar(t.t0.response&&t.t0.response.data.error||"Something went wrong",{variant:"error"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.removeFromList=function(t){var a=e.state.membersToAdd,n=Object(he.a)(a).filter((function(e){return e._id!==t}));e.setState({membersToAdd:n})},e.addToList=function(){var t=e.state,a=t.foundUser,n=t.membersToAdd;if(n.find((function(e){return e._id===a._id})))return e.props.enqueueSnackbar("This user is already in your list",{variant:"error"});var r=Object(he.a)(n);r.push(a),e.setState({membersToAdd:r,foundUser:null})},e.changeHandler=function(t){e.setState({userKey:t.target.value})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.foundUser,c=t.userKey,o=t.membersToAdd,i=this.props.outerLoading;return r.a.createElement("div",null,r.a.createElement("div",{id:"addMembers"},r.a.createElement("div",{className:"membersListSection"},r.a.createElement("h2",null,"Your Members List:"),r.a.createElement("div",null,o.length>0&&o.map((function(t,a){return r.a.createElement(Me.a,{key:a},r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:t.image&&t.image.url})),r.a.createElement(Ue.a,{style:{textTransform:"capitalize"},primary:"".concat(t.firstName," ").concat(t.lastName)}),r.a.createElement(ua.a,null,r.a.createElement(Ie.a,{edge:"end","aria-label":"delete",onClick:function(){return e.removeFromList(t._id)}},r.a.createElement(da.a,{color:"secondary"}))))})))),r.a.createElement("div",{className:"findSection"},r.a.createElement(U.a,{id:"outlined-basic",label:"User Key",variant:"outlined",onChange:this.changeHandler,fullWidth:!0,value:c}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Z,{name:"find",loading:a,disabled:""===c.trim(),func:this.getMember}),n&&r.a.createElement("div",{className:"foundUser"},r.a.createElement(Me.a,null,r.a.createElement(at.a,null,r.a.createElement(ze.a,{src:n.image&&n.image.url})),r.a.createElement(Ue.a,{style:{textTransform:"capitalize"},primary:"".concat(n.firstName," ").concat(n.lastName)}),r.a.createElement(ua.a,null,r.a.createElement(Ie.a,{edge:"end","aria-label":"add",onClick:this.addToList},r.a.createElement(va.a,{color:"primary"}))))))),r.a.createElement(Z,{name:"add members",loading:i,func:function(){return e.props.addMembersToTeam(o)},fullWidth:!0,disabled:0===o.length}))}}]),a}(n.Component),ba=Object($.b)(ga),ha=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,teamStatistics:null,team:null,teamNotifications:null,paginationItemsCount:0,modalOpen:!1,modalType:""},e.teamId=e.props.match.params.teamId,e.userId=e.props.userId,e.socketListeners=["newMembersForTeam","userHasKicked","newPublicBug","publicBugFixed","publicBugReopened","newTeamProject","projectClosingOrReopening","teamIsDeleted","leaderKickedProjectOwner"],e.getTeamData=Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.getTeam(),e.getTeamNotifications()]);case 2:case"end":return t.stop()}}),t)}))),e.getTeam=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ea(e.teamId);case 2:a=t.sent,e.props.saveCurrentTeamId(a.data.team._id),e.setState({team:a.data.team,teamStatistics:a.data.teamStatistics});case 5:case"end":return t.stop()}}),t)}))),e.getTeamNotifications=Object(M.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ta(e.teamId,1);case 2:a=t.sent,e.setState({teamNotifications:a.data.notifications,paginationItemsCount:a.data.paginationItemsCount});case 4:case"end":return t.stop()}}),t)}))),e.paginateTeamNotifiactions=Object(M.a)(D.a.mark((function t(){var a,n,r=arguments;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,ve.a.start(),t.prev=2,t.next=5,ta(e.teamId,a);case 5:n=t.sent,e.setState({teamNotifications:n.data.notifications,paginationItemsCount:n.data.paginationItemsCount}),ve.a.done(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),e.props.enqueueSnackbar(t.t0.reponse.data.error||"Something went wrong",{variant:"error"}),ve.a.done();case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.openModal=function(t){e.setState({modalOpen:!0,modalType:t})},e.closeModal=function(){e.setState({modalOpen:!1})},e.kickMemberFromTeam=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.teamId,ve.a.start(),r={teamId:n,memberId:a},t.prev=3,t.next=6,aa(r);case 6:return c=t.sent,t.next=9,e.getTeamData();case 9:ve.a.done(),e.props.enqueueSnackbar(c.data.message,{variant:"success"}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),ve.a.done(),e.props.enqueueSnackbar(t.t0.response.data.error||"Something Went Wrong.",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),e.addMembersToTeam=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c,o,i,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.map((function(e){return e._id})),e.setState({loading:!0}),t.prev=2,r=e.teamId,c={teamId:r,members:n},t.next=7,Zt(c);case 7:return o=t.sent,t.next=10,e.getTeamData();case 10:e.props.enqueueSnackbar(o.data.message,{variant:"success"}),e.setState({loading:!1}),e.closeModal(),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),e.props.enqueueSnackbar((null===(i=t.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Something Went wring",{variant:"error"}),e.setState({loading:!1});case 19:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e.removeProject=function(){var t=Object(M.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ve.a.start(),t.prev=1,t.next=4,kt(a,e.teamId);case 4:return n=t.sent,t.next=7,e.getTeamData();case 7:e.props.enqueueSnackbar(n.data.message,{variant:"success"}),ve.a.done(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),ve.a.done();case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.updateTeamNotifications=function(t,a){var n=Object(he.a)(e.state.teamNotifications);"add"===a&&t.forEach((function(e){n.unshift(e)})),"remove"===a&&n.unshift(t),"addProjectNotification"===a&&n.unshift(t),e.setState({teamNotifications:n})},e.increaseTeamMembers=function(t){var a=Object(be.a)({},e.state.team),n=Object(he.a)(a.members).concat(t);a.members=n,e.setState({team:a})},e.decreaseTeamMembers=function(t){var a=Object(be.a)({},e.state.team),n=Object(he.a)(a.members).filter((function(e){return e._id!==t}));a.members=n,e.setState({team:a})},e.updateBugStatistics=function(t,a){var n=Object(be.a)({},e.state.teamStatistics),r=Object(be.a)({},n.bugs);if("newPublicBug"===t){r.totalBugs+=1,r.buggyBugs+=1;var c=Object(be.a)({},e.state.team),o=Object(he.a)(c.projects),i=o.findIndex((function(e){return e._id===a})),s=Object(be.a)({},o[i]),l=Object(he.a)(s.bugs);l.push({_id:"11111111111111",status:0}),s.bugs=l,o[i]=s,c.projects=o,e.setState({team:c})}"publicBugFixed"===t&&(r.buggyBugs-=1,r.fixedBugs=1),"publicBugReopened"===t&&(r.buggyBugs+=1,r.fixedBugs-=1),n.bugs=r,e.setState({teamStatistics:n})},e.newProjectForTeam=function(t){var a=Object(be.a)({},e.state.team),n=Object(he.a)(a.projects);n.push(t),a.projects=n,e.setState({team:a})},e.updateProjectStatusForTeam=function(t,a){var n=Object(be.a)({},e.state.team),r=Object(he.a)(n.projects),c=r.findIndex((function(e){return e._id===t})),o=Object(be.a)({},r[c]);o.status=a,r[c]=o,n.projects=r,e.setState({team:n})},e.updateProjectsStatistics=function(t,a){var n=Object(be.a)({},e.state.teamStatistics),r=Object(be.a)({},n.projects);"newProject"===t&&(r.totalProjects++,r.openedProjects++),"projectOpenedOrClosed"===t&&(1===a&&(r.closedProjects++,r.openedProjects--),0===a&&(r.openedProjects++,r.closedProjects--)),n.projects=r,e.setState({teamStatistics:n})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.a.start(),e.prev=1,e.next=4,this.getTeamData();case 4:ve.a.done(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ve.a.done(),this.props.enqueueSnackbar(e.t0.response&&(e.t0.response.data.error,{variant:"error"}));case 11:Za.on("newMembersForTeam",(function(e){var a=e.teamMembers,n=e.team,r=e.newTeamNotifications,c=e.usersToAdd,o=e.leaderId;a.includes(t.userId)&&t.teamId===n._id&&t.userId!==o&&(t.increaseTeamMembers(c),t.updateTeamNotifications(r,"add"))})),Za.on("userHasKicked",function(){var e=Object(M.a)(D.a.mark((function e(a){var n,r,c,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.newTeamNotification,r=a.team,c=a.kickedUser,o=a.leaderId,i=a.projectLeaderIsKicked,r._id!==t.teamId||o===t.userId){e.next=10;break}if(!i){e.next=6;break}return e.next=5,t.getTeamData();case 5:return e.abrupt("return",e.sent);case 6:if(t.userId!==c){e.next=8;break}return e.abrupt("return",t.props.history.push("/bugTracker/teams"));case 8:t.updateTeamNotifications(n,"remove"),t.decreaseTeamMembers(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Za.on("newPublicBug",(function(e){var a=e.teamId,n=e.projectId;t.teamId===a&&t.updateBugStatistics("newPublicBug",n)})),Za.on("publicBugFixed",(function(e){var a=e.teamId;t.teamId===a&&t.updateBugStatistics("publicBugFixed")})),Za.on("publicBugReopened",(function(e){e.teamId===t.teamId&&t.updateBugStatistics("publicBugReopened")})),Za.on("newTeamProject",(function(e){var a=e.newTeamNotification,n=e.project;e.teamId===t.teamId&&(t.newProjectForTeam(n),t.updateTeamNotifications(a,"addProjectNotification"),t.updateProjectsStatistics("newProject"))})),Za.on("projectClosingOrReopening",(function(e){var a=e.teamId,n=e.newTeamNotification,r=e.updatedStatus,c=e.projectId;t.teamId===a&&(t.updateProjectStatusForTeam(c,r),t.updateTeamNotifications(n,"addProjectNotification"),t.updateProjectsStatistics("projectOpenedOrClosed",r))})),Za.on("teamIsDeleted",(function(e){e.teamId===t.teamId&&t.props.history.push("/bugtracker/teams")}));case 19:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.socketListeners.forEach((function(e){return Za.removeEventListener(e)}))}},{key:"render",value:function(){var e,t,a=this,c=this.state,o=c.team,i=c.teamNotifications,s=c.paginationItemsCount,l=c.teamStatistics,u=c.loading,m=c.modalOpen,p=c.modalType,f=this.userId;if(o){var v,g=Object(Ee.a)(o.members);try{for(g.s();!(v=g.n()).done;){var b=v.value;b._id===o.leader&&(e=b)}}catch(h){g.e(h)}finally{g.f()}t="".concat(o.members.length," Members"),1===o.members.length&&(t="".concat(o.members.length," Member"))}return r.a.createElement(n.Fragment,null,o&&i&&l&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"teamContHeader"},r.a.createElement("h2",{className:"teamH"},r.a.createElement("span",null,o.name)," |",r.a.createElement("span",{className:"teamMembers",onClick:function(){return a.openModal("teamMembers")}}," ",t)),f===o.leader&&r.a.createElement(Je.a,{title:"Add Members"},r.a.createElement(d.a,{color:"primary",variant:"contained",size:"small",onClick:function(){return a.openModal("addMembers")}},r.a.createElement(Dt.a,null),"members"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4",style:{marginBottom:"20px"}},r.a.createElement(sa,{teamProjects:o.projects,teamNotifications:i,paginationItemsCount:s,paginateTeamNotifiactions:this.paginateTeamNotifiactions})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(Pt,{statistics:l,Statfor:"team"}))),r.a.createElement("div",{id:"teamProjects"},r.a.createElement("div",null,r.a.createElement("h2",null,"Team Projects"),r.a.createElement("hr",null)),r.a.createElement(la,{projects:o.projects,removeProject:this.removeProject})),m&&r.a.createElement(tt,{modalOpen:m,closeModal:this.closeModal,header:"teamMembers"===p?"Team Members":"addMembers"===p?"Add Members":null},"teamMembers"===p?r.a.createElement(pa,{kickMemberFromTeam:this.kickMemberFromTeam,members:o.members,leader:e}):"addMembers"===p?r.a.createElement(ba,{teamId:this.teamId,outerLoading:u,addMembersToTeam:this.addMembersToTeam}):null)))}}]),a}(n.Component),Ea=Object(ge.b)((function(e){return{userId:e.currentUser&&e.currentUser._id}}),(function(e){return{saveCurrentTeamId:function(t){return e(function(e){return{type:"CURRENT_TEAM",payload:{currentTeamId:e}}}(t))}}}))(Object($.b)(ha)),ya=a(620),ja=a(567),wa=a(661),ka=a(649),Sa=a(655),Oa=a(621),xa=a(653),Ta=a(650),Na=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",teams:null,type:"private",teamId:null,loading:!1},e.changeHandler=function(t){var a=t.target.value;return e.setState(Object(H.a)({},t.target.name,a)),a},e.typeChangeHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.changeHandler(a),r=e.state.teams,"public"!==n||r){t.next=5;break}return t.next=5,e.fetchteams();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchteams=Object(M.a)(D.a.mark((function t(){var a,n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue("yes");case 3:n=t.sent,r=n.data.teams,e.setState({teams:r,teamId:null===(a=r[0])||void 0===a?void 0:a._id}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.newProject=Object(M.a)(D.a.mark((function t(){var a,n,r,c,o,i,s,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,a=e.state,n=a.name,r=a.type,c=a.teamId,o={name:n,type:r},"public"===r&&(o.teamId=c),t.next=7,yt(o);case 7:i=t.sent,e.setState({loading:!1}),e.props.enqueueSnackbar(i.data.message,{variant:"success"}),setTimeout(e.navigateAfterAdding,1e3),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),e.setState({loading:!1}),e.props.enqueueSnackbar((null===(s=t.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||"Something went wrong",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),e.navigateAfterAdding=function(){var t=e.state,a=t.type,n=t.teamId;if("public"===a)return e.props.history.push("/bugtracker/teams/".concat(n));e.props.history.push("/bugtracker/dashboard")},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.type,a=e.name,n=e.teams,c=e.teamId,o=e.loading;return r.a.createElement(R,{type:"New Project"},r.a.createElement(U.a,{id:"outlined-basic",label:"Name",variant:"outlined",fullWidth:!0,value:a,name:"name",onChange:this.changeHandler}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ya.a,{component:"fieldset"},r.a.createElement(ja.a,{component:"legend"},"Project Type"),r.a.createElement(wa.a,{"aria-label":"Project Type",name:"ProjectType",value:t,onChange:this.typeChangeHandler,color:"primary"},r.a.createElement(ka.a,{color:"primary",value:"private",control:r.a.createElement(Sa.a,null),label:"private",name:"type"}),r.a.createElement(ka.a,{color:"primary",value:"public",control:r.a.createElement(Sa.a,null),label:"public",name:"type"}))),r.a.createElement("br",null),r.a.createElement("br",null),(null===n||void 0===n?void 0:n.length)>0&&"public"===t&&r.a.createElement(ya.a,{variant:"filled",fullWidth:!0},r.a.createElement(Oa.a,{id:"demo-simple-select-filled-label"},"Select Team"),r.a.createElement(xa.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:c,onChange:this.changeHandler,name:"teamId",fullWidth:!0},n.map((function(e,t){return r.a.createElement(Ta.a,{value:e._id},e.name)})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Z,{name:"New Project",loading:o,func:this.newProject,fullWidth:!0,disabled:0===a.trim().length}))}}]),a}(n.Component),Pa=Object($.b)(Na),Ia=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){try{this.props.getUserData()}catch(e){console.error(e)}}},{key:"render",value:function(){return this.props.loading?ve.a.start():ve.a.done(),r.a.createElement("div",null,this.props.user&&r.a.createElement(it,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/bugtracker/profile",component:ut}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/profile/edit",component:dt}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/dashboard",component:Ot}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/project/:projectId",component:Xt}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/teams",component:ia}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/teams/:teamId",component:Ea}),r.a.createElement(m.b,{exact:!0,path:"/bugtracker/newProject",component:Pa}))))}}]),a}(n.Component),Ca=Object(ge.b)((function(e){return{user:e.currentUser,loading:e.loading}}),(function(e){return{getUserData:function(){return e(function(){var e=Object(M.a)(D.a.mark((function e(t){var a,n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START"}),e.prev=1,e.next=4,K("GET","/users/personalData");case 4:n=e.sent,t({type:"STORE_USER_DATA",payload:{user:null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.user}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"ERROR_OCCURED",payload:{message:null===(r=e.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.error}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}}}))(Ia),Ba=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",loading:!1},e.submitHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),t.prev=2,n=e.state.email,r={email:n},t.next=7,V(r);case 7:c=t.sent,e.props.storeForgetedPasswordEmail(n),e.props.enqueueSnackbar(c.data.message,{variant:"success"}),setTimeout((function(){e.props.history.push("/forgetPassword/submitCode")}),2e3),e.setState({loading:!1}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),e.props.enqueueSnackbar(t.t0.response.data.error||"Something Went Wrong",{variant:"error"}),e.setState({loading:!1});case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e.changeHandler=function(t){e.setState({email:t.target.value})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.loading;return r.a.createElement(R,{type:"Forget Password"},r.a.createElement(ht.a,{severity:"info",fullWidth:!0},"We`ll send you a gmail with the verification code. Please not that the code is available for only 5 minutes."),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement(U.a,{id:"outlined-basic",name:"email",label:"Email",variant:"outlined",required:!0,value:t,fullWidth:!0,onChange:this.changeHandler,type:"email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Z,{name:"Send Email",fullWidth:!0,loading:a,type:"submit"})))}}]),a}(n.Component),Aa=Object(ge.b)((function(e){return{loading:e.loading}}),(function(e){return{storeForgetedPasswordEmail:function(t){e(function(e){return{type:"FORGET_PASSWORD",payload:{email:e}}}(t))}}}))(Object($.b)(Ba)),_a=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,code:""},e.changeHandler=function(t){e.setState({code:t.target.value})},e.submitHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c,o,i,s,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),t.prev=2,r=e.state.code,c=e.props.email,o={code:r,email:c},t.next=8,X(o);case 8:i=t.sent,setTimeout((function(){e.props.history.push("/forgetPassword/changePassword/".concat(i.data.slug))}),2e3),e.setState({loading:!1}),e.props.enqueueSnackbar(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message,{variant:"success"}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),e.props.enqueueSnackbar((null===(s=t.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||"Something Went Wrong",{variant:"error"}),e.setState({loading:!1});case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"render",value:function(){this.props.email||this.props.history.push("/");var e=this.state,t=e.loading,a=e.code;return r.a.createElement(R,{type:"Submit Your Code"},r.a.createElement(ht.a,{severity:"info",fullWidth:!0},"Please Check your code via Gmail... the code is only available for 5 minutes"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement(U.a,{id:"outlined-basic",name:"code",label:"Code",variant:"outlined",required:!0,value:a,fullWidth:!0,onChange:this.changeHandler}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Z,{name:"Submit",fullWidth:!0,loading:t,type:"submit"})))}}]),a}(n.Component),Wa=Object(ge.b)((function(e){return{email:e.forgetPasswordEmail}}))(Object($.b)(_a)),Da=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,firstPassword:"",secondPassword:""},e.slug=e.props.match.params.slug,e.submitHandler=function(){var t=Object(M.a)(D.a.mark((function t(a){var n,r,c,o,i,s,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loading:!0}),t.prev=2,n=e.state,r=n.firstPassword,c=n.secondPassword,o={firstPassword:r,secondPassword:c,slug:e.slug},t.next=7,J(o);case 7:i=t.sent,e.props.enqueueSnackbar(i.data.message,{variant:"success"}),setTimeout((function(){e.props.history.push("/")}),2e3),e.setState({loading:!1}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),e.setState({loading:!1}),e.props.enqueueSnackbar((null===(s=t.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||"Something Went Wrong",{variant:"error"});case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),e.changeHandler=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstPassword,a=e.secondPassword,n=e.loading;return r.a.createElement(R,{type:"Change Password"},r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement(U.a,{id:"outlined-basic",name:"firstPassword",label:"Password",variant:"outlined",required:!0,value:t,fullWidth:!0,onChange:this.changeHandler}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(U.a,{id:"outlined-basic",name:"secondPassword",label:"Confirm",variant:"outlined",required:!0,value:a,fullWidth:!0,onChange:this.changeHandler}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Z,{name:"Change",fullWidth:!0,loading:n,type:"submit"})))}}]),a}(n.Component),Ma=Object($.b)(Da),Ha=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).detectTokenPlaying=function(t){"token"===t.key&&null===t.oldValue||"token"===t.key&&t.oldValue!==t.newValue&&e.getOut()},e.getOut=function(){localStorage.removeItem("token"),e.props.history.push("/")},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("storage",this.detectTokenPlaying,!1),_.a.init({offset:120,delay:0,duration:1200,easing:"ease",once:!1,mirror:!0})}},{key:"render",value:function(){var e=null===localStorage.getItem("token")?r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:B}),r.a.createElement(m.b,{path:"/signup",exact:!0,component:te}),r.a.createElement(m.b,{path:"/signin",exact:!0,component:re}),r.a.createElement(m.b,{path:"/forgetPassword",exact:!0,component:Aa}),r.a.createElement(m.b,{path:"/forgetPassword/submitCode",exact:!0,component:Wa}),r.a.createElement(m.b,{path:"/forgetPassword/changePassword/:slug",exact:!0,component:Ma}),r.a.createElement(m.a,{to:"/"})):r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/bugtracker",component:Ca}),r.a.createElement(m.a,{to:"/bugtracker/profile"}));return r.a.createElement("div",{id:"App"},e)}}]),a}(n.Component);z.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&"Token is expired"===e.response.data.error&&localStorage.removeItem("token"),Promise.reject(e)}));var Ua=Object(m.g)(Ha),qa=a(249),Fa=a.n(qa);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ra=a(652),La=a(251),za=a(651),Ka=Object(La.a)({palette:{primary:za.a}}),Ga=a(88),Ya=a(250),Va={currentUser:null,loading:!1,currentTeamId:null,forgetPasswordEmail:null},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START":return Object(be.a)(Object(be.a)({},e),{},{loading:!0});case"ERROR_OCCURED":return Object(be.a)(Object(be.a)({},e),{},{loading:!1});case"STORE_USER_DATA":return Object(be.a)(Object(be.a)({},e),{},{loading:!1,currentUser:t.payload.user});case"UPDATE_USER_DATA":return Object(be.a)(Object(be.a)({},e),{},{currentUser:t.payload.updatedUser});case"NEW_KEY":var a=Object(be.a)({},e.currentUser);return a.privateKey=t.payload.updatedKey,Object(be.a)(Object(be.a)({},e),{},{currentUser:a});case"CURRENT_TEAM":var n=t.payload.currentTeamId;return Object(be.a)(Object(be.a)({},e),{},{currentTeamId:n});case"FORGET_PASSWORD":var r=t.payload.email;return Object(be.a)(Object(be.a)({},e),{},{forgetPasswordEmail:r});default:return e}},Ja=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ga.c,$a=Object(Ga.d)(Xa,Ja(Object(Ga.a)(Ya.a))),Qa="https://the-bug-tracker-server.glitch.me/";z.a.defaults.baseURL=Qa;var Za=Fa()("".concat(Qa,"/"));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge.a,{store:$a},r.a.createElement(ae.a,null,r.a.createElement(Ra.a,{theme:Ka},r.a.createElement($.a,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement(Ua,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[264,1,2]]]);
//# sourceMappingURL=main.47b53833.chunk.js.map